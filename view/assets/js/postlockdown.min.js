!function(a,b){"use strict";function c(b,c){this.$el=a(b),this.options=a.extend({},c),this.$search=this.options.inputSearch,this.$left=this.options.ulAvailable,this.$right=this.options.ulSelected,this.$spinner=this.options.spinner,this.doingAjax=!1,this.init()}var d="plmultiselect";c.prototype={init:function(){var b=this;this.$right.height(this.$left.parent().height()),this.$search.autocomplete({minLength:0,source:function(a){b.queryItems(a.term,0,function(a){b.renderMenu(b.$left,a.data)})},create:function(){a(this).autocomplete("search")}}),this.$left.on("click","> li",function(){a(this).is(".selected")||b.selectItem.call(b,a(this))}),this.$right.on("click","> li .dashicons-no",function(){var c=a(this).closest("li").data("ID");a(this).closest("li").remove(),b.$left.find(".post-"+c).removeClass("selected")}),this.options.selected.length&&this.selectItem(this.options.selected),this.$left.on("scroll",function(){this.scrollHeight-a(this).scrollTop()-15<=a(this).height()&&b.nextPage()})},nextPage:function(){var a=this,b=this.options.inputSearch.val(),c=this.$left.children("li").length;this.queryItems(b,c,function(b){a.renderMenu(a.$left,b.data,"",!0)})},queryItems:function(c,d,e){return!this.doingAjax&&(this.doingAjax=!0,this.$spinner.addClass("is-active"),void a.ajax({url:b.ajaxurl,type:"GET",data:{action:this.options.ajaxAction,term:c,offset:d},context:this,success:function(b){a.isFunction(e)&&e.call(this,b)},complete:function(){this.doingAjax=!1,this.$spinner.removeClass("is-active")}}))},selectItem:function(b){var c=this.options.inputName;a.isArray(b)?this.renderMenu(this.$right,b,!0):(c+="["+b.data("ID")+"]",b.clone(!1).data("ID",b.data("ID")).appendTo(this.$right).find("input.post-id").prop("disabled",!1),b.addClass("selected"))},renderMenu:function(b,c,d){var e=this,f=[];d||b.empty(),a.each(c,function(a,b){f.push(e.getItemTpl(b))}),b.append(f)},getItemTpl:function(b){var c=a(this.interpolate(this.options.itemTpl,{item:b,self:this}));return this.$right.find(".post-"+b.ID).length&&c.addClass("selected"),c},interpolate:function(a,b){return a.replace(/\{\{([^\{\}]+)\}\}/g,function(a,c){var d=c.split(".");if(d.length>1){for(var e=b,f=0;f<d.length&&e[d[f]];f++)e=e[d[f]];if("string"==typeof e||"number"==typeof e)return e}return"undefined"==typeof b[c]?"":b[c]})}},a.fn[d]=function(b){return this.each(function(){var e=a(this).data(d+".plugin");e||(e=new c(this,b),a(this).data(d+".plugin",e))})}}(jQuery,window),function(a){"use strict";a(function(){a(".pl-posts-container").each(function(){var b=a(this).find(".pl-posts-selected .pl-multiselect").data("key"),c=a(this).find(".pl-posts-selected .pl-multiselect").data("input_name");a(this).plmultiselect({ajaxAction:"pl_autocomplete",inputName:c,inputSearch:a(this).find(".pl-autocomplete"),ulAvailable:a(this).find(".pl-posts-available .pl-multiselect"),ulSelected:a(this).find(".pl-posts-selected .pl-multiselect"),selected:window.postlockdown[b]||[],spinner:a(this).find(".spinner"),itemTpl:a("#plmultiselect-item-template").html()})})})}(jQuery);
//# sourceMappingURL=postlockdown.min.js.map